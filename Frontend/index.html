<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <!-- Favicon -->
    <link href="img/favicon.png" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

  
    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
        <style>
            .toast-container {
                z-index: 1050; /* Ensure it's higher than the navbar */
                margin-top: 70px; /* Adjust as necessary to ensure visibility */
            }
        </style>
</head>

<body>
   
    <div class="container-xxl bg-white p-0">
    
   

         <!-- Toast Message-->
    <div class="toast-container position-fixed top-3 end-0 p-3" style="z-index: 11">
        <div id="myToast" class="toast align-items-center  bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body text-light" id="toastMessage">
                    Hello, world! This is a toast message.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
      </div>



        <!-- Navbar Start -->
        <nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top  p-0" id="navBar">

            <a href="index.html" class="navbar-brand d-flex align-items-center text-center py-0 px-4 px-lg-5">
                <h1 class="m-0 text-primary">JobEntry</h1>
            </a>
            <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto p-4 p-lg-0">
                    <a href="index.html" class="nav-item nav-link active">Home</a>
                    <a href="about.html" class="nav-item nav-link">About</a>
                    
                    <a href="contact.html" class="nav-item nav-link">Contact</a>
                    <a href="#" class="nav-item nav-link d-none" id="logOut">LogOut</a>
                    <a href="login.html" class="nav-item nav-link" id="login-resgister">Login/Register</a>
                    <a href="employerProfile.html" class="nav-item nav-link d-none" id="empProfile">
                        <i class="fa fa-2x fa-user-tie text-primary mb-0"></i>
                    </a>
                    <a href="JobSeekerProfile.html" class="nav-item nav-link d-none" id="jobProfile">
                        <i class="fa fa-2x fa-user-tie text-primary mb-0"></i>
                    </a>

                </div>
                <button class="btn btn-primary rounded-0 py-4 px-lg-5 d-none d-lg-block"  id="postJobButton" onclick="postJob()">Post A Job<i
                        class="fa fa-arrow-right ms-3" id="postJobFont"></i></button>
            </div>
        </nav>
        <!-- Navbar End -->


        <!-- Carousel Start -->
        <div class="container-fluid p-0">
            <div class="owl-carousel header-carousel position-relative">
                <div class="owl-carousel-item position-relative">
                    <img class="img-fluid" src="img/carousel-1.jpg" alt="">
                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
                        style="background: rgba(43, 57, 64, .5);">
                        <div class="container">
                            <div class="row justify-content-start">
                                <div class="col-10 col-lg-8">
                                    <h1 class="display-3 text-white animated slideInDown mb-4">Find The Perfect Job That
                                        You Deserved</h1>
                                    <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum
                                        dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd
                                        rebum sea elitr.</p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="owl-carousel-item position-relative">
                    <img class="img-fluid" src="img/carousel-2.jpg" alt="">
                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
                        style="background: rgba(43, 57, 64, .5);">
                        <div class="container">
                            <div class="row justify-content-start">
                                <div class="col-10 col-lg-8">
                                    <h1 class="display-3 text-white animated slideInDown mb-4">Find The Best Startup Job
                                        That Fit You</h1>
                                    <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum
                                        dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd
                                        rebum sea elitr.</p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Carousel End -->


        <!-- Search Start -->
        <div class="container-fluid bg-primary mb-5 wow fadeIn" data-wow-delay="0.1s" style="padding: 35px;">
            <div class="container">
                <div class="row g-2">
                    <div class="col-md-10">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <input type="text" id="searchInput" class="form-control border-0" placeholder="Keyword" />
                            </div>
                            <div class="col-md-4">
                                <select class="form-select border-0" id="salaryFilter">
                                    <option value="" selected> Salaries</option>
                                    <option value="0-10000">Less than 10,000</option>
                                    <option value="10000-20000">10,000 - 20,000</option>
                                    <option value="20000-30000">20,000 - 30,000</option>
                                    <option value="30000-40000">30,000 - 40,000</option>
                                    <option value="40000-50000">40,000 - 50,000</option>
                                    <option value="50000-60000">50,000 - 60,000</option>
                                    <option value="60000-70000">60,000 - 70,000</option>
                                    <option value="70000-80000">70,000 - 80,000</option>
                                    <option value="80000-90000">80,000 - 90,000</option>
                                    <option value="90000-100000000">More than 90,000</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="text" id="locationFilter" class="form-control border-0" placeholder="Location" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-dark border-0 w-100">Search</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Search End -->


        <!-- Category Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">Explore By Category</h1>
                <div class="row g-4">
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="marketingJob">
                            <i class="fa fa-3x fa-sharp fa-lightbulb text-primary mb-4"></i>
                            <h6 class="mb-3">Marketing</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="customerServiceJob">
                            <i class="fa fa-3x fa-headset text-primary mb-4"></i>
                            <h6 class="mb-3">Customer Service</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="humanResourceJob">
                            <i class="fa fa-3x fa-user-tie text-primary mb-4"></i>
                            <h6 class="mb-3">Human Resource</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="productManagementJob">
                            <i class="fa fa-3x fa-tasks text-primary mb-4"></i>
                            <h6 class="mb-3">Project Management</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="networkingJob">
                            <i class="fa fa-3x fa-sharp fa-network-wired text-primary mb-4"></i>
                            <h6 class="mb-3">Networking</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="uiuxJob">
                            <i class="fa fa-3x fa-pen-fancy fa-sharp text-primary mb-4"></i>
                            <h6 class="mb-3">UX/UI Designer</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="dataScienceJob">
                            <i class="fa fa-3x fa-database fa-sharp text-primary mb-4"></i>
                            <h6 class="mb-3">Data Science</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                        <a class="cat-item rounded p-4" href="#tab-1" id="softwareJob">
                            <i class="fa fa-3x fa-drafting-compass text-primary mb-4"></i>
                            <h6 class="mb-3">Software Development</h6>
                            <p class="mb-0">123 Vacancy</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Category End -->


        <!-- About Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <div class="row g-5 align-items-center">
                    <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
                        <div class="row g-0 about-bg rounded overflow-hidden">
                            <div class="col-6 text-start">
                                <img class="img-fluid w-100" src="img/about-1.jpg">
                            </div>
                            <div class="col-6 text-start">
                                <img class="img-fluid" src="img/about-2.jpg" style="width: 85%; margin-top: 15%;">
                            </div>
                            <div class="col-6 text-end">
                                <img class="img-fluid" src="img/about-3.jpg" style="width: 85%;">
                            </div>
                            <div class="col-6 text-end">
                                <img class="img-fluid w-100" src="img/about-4.jpg">
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                        <h1 class="mb-4">We Help To Get The Best Job And Find A Talent</h1>
                        <p class="mb-4">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet
                            diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna
                            dolore erat amet</p>
                        <p><i class="fa fa-check text-primary me-3"></i>Tempor erat elitr rebum at clita</p>
                        <p><i class="fa fa-check text-primary me-3"></i>Aliqu diam amet diam et eos</p>
                        <p><i class="fa fa-check text-primary me-3"></i>Clita duo justo magna dolore erat amet</p>

                    </div>
                </div>
            </div>
        </div>
        <!-- About End -->


        <!-- Jobs Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">Job Listing</h1>
                <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
                    <ul class="nav nav-pills d-inline-flex justify-content-center border-bottom mb-5">
                        <li class="nav-item">
                            <a class="d-flex align-items-center text-start mx-3 ms-0 pb-3 active" data-bs-toggle="pill" id="tab-1-Job"
                                href="#tab-1">
                                <h6 class="mt-n1 mb-0">Featured</h6>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex align-items-center text-start mx-3 pb-3" data-bs-toggle="pill"
                                href="#tab-2">
                                <h6 class="mt-n1 mb-0">Full Time</h6>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex align-items-center text-start mx-3 me-0 pb-3" data-bs-toggle="pill"
                                href="#tab-3">
                                <h6 class="mt-n1 mb-0">Part Time</h6>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab-1" class="tab-pane fade show p-0 active">

                        </div>
                        <div id="tab-2" class="tab-pane fade show p-0">

                        </div>
                        <div id="tab-3" class="tab-pane fade show p-0">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Jobs End -->


        

        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5 justify-content-center">
                    <div class="col-lg-6 col-md-6 d-flex justify-content-around">
                        <div>
                            <h5 class="text-white mb-4">Quick Links</h5>
                            <a class="btn btn-link text-white-50" href="about.html">About Us</a>
                            <a class="btn btn-link text-white-50" href="contact.html">Contact Us</a>
                            <a class="btn btn-link text-white-50" href="index.html">Home</a>
                        </div>
                        <div>
                            <h5 class="text-white mb-4">Contact</h5>
                            <p class="mb-2">
                                <i class="fa fa-map-marker-alt me-3"></i>Chennai, Tamil Nadu,
                                India
                            </p>
                            <p class="mb-2">
                                <i class="fa fa-phone-alt me-3"></i>+91 8737848822
                            </p>
                            <p class="mb-2">
                                <i class="fa fa-envelope me-3"></i>aaseaman01@gmail.com
                            </p>
                            <div class="d-flex pt-2">
                                <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                                <a class="btn btn-outline-light btn-social" href=""><i
                                        class="fab fa-facebook-f"></i></a>
                                <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                                <a class="btn btn-outline-light btn-social" href=""><i
                                        class="fab fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="#">Job Entry</a>, All
                            Right Reserved.

                            Made with ‚ù§ by Aman Agrawal

                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            <div class="footer-menu">
                                <a href="">Home</a>
                                <a href="">Cookies</a>
                                <a href="">Help</a>
                                <a href="">FQAs</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->

    <!-- job Details Modal -->
        <div class="modal fade" id="jobModal" tabindex="-1" aria-labelledby="jobModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-center">
                        <h5 class="modal-title   text-light" id="jobModalLabel">Job Title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img id="jobModalImage" class="img-fluid border rounded mb-3" src="" alt="" style="width: 100%; height: auto;">
                        <p><strong>Company Name:</strong> <span id="jobModalCompanyName"></span></p>
                        <p><strong>Job Title:</strong> <span id="jobModalJobTitle"></span></p>
                        <p><strong>Category:</strong> <span id="jobModalCategory"></span></p>
                        <p><strong>Description:</strong></p><p id="jobModalDescription"></p>
                        <p><strong>Salary:</strong> <span id="jobModalSalary"></span></p>
                        <p><strong>Location:</strong> <span id="jobModalLocation"></span></p>
                        <p><strong>Type:</strong> <span id="jobModalType"></span></p>
                        <p><strong>Skills:</strong></p>
                <ul id="jobModalSkills"></ul> <!-- Updated to use <ul> for skills -->
                        <p><strong>Posting Date:</strong> <span id="jobModalPostingDate"></span></p>
                        <p><strong>Closing Date:</strong> <span id="jobModalClosingDate"></span></p>
                      
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>
                        
                    </div>
                </div>
            </div>
        </div>
        <!-- job details model end -->
        


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- Initialize Owl Carousel -->
    <script>
        $(document).ready(function () {
            $(".owl-carousel").owlCarousel({
                items: 1,
                loop: true,
                autoplay: true,
                autoplayTimeout: 5000,
                autoplayHoverPause: true,
                nav: false,
                dots: true,
                animateOut: 'fadeOut',
                animateIn: 'fadeIn',
            });
        });
        if(localStorage.getItem('token')){
            document.getElementById('logOut').classList.remove('d-none');
            document.getElementById('login-resgister').classList.add('d-none');
        }
        if(localStorage.getItem('EmployerId')){
            document.getElementById('empProfile').classList.remove('d-none');
            
        }
        if(localStorage.getItem('JobSeekerId')){
            document.getElementById('jobProfile').classList.remove('d-none');
            document.getElementById('postJobButton').style.display = 'none';
            // document.getElementById('postJobFont').classList.add('d-none');
            
        }
       
    
    

        let AllJobs = [];

const loadJob = async () => {
    try {
        const response = await fetch('http://localhost:5190/api/Application/GetAllJobs', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        });
        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(`Status : ${errorData.statusCode}, message : ${errorData.message}`);
        }
        const data = await response.json();
       
        AllJobs = data; // Assign data to AllJobs
        
        await displayJobs(AllJobs, 'tab-1');
        await partTimeJob();
        await fullTimeJob();

    } catch (err) {
        console.log(err.message);
    }
}

        // Ending off load All Jobs

      // Display Jobs
      const displayJobs = async (jobs, documentId) => {
    try {
        const Jobs = document.getElementById(documentId);
        console.log(jobs);
        Jobs.innerHTML = ''; // Clear existing jobs before displaying new ones
        jobs.forEach(job => {
            const jobItem = document.createElement('div');
            jobItem.classList.add('job-item', 'p-4', 'mb-4');
            jobItem.innerHTML = `
                <div class="row g-4">
                    <div class="col-sm-12 col-md-8 d-flex align-items-center">
                        <img class="flex-shrink-0 img-fluid border rounded" src=${job.imageUrl} alt="" style="width: 80px; height: 80px;">
                        <div class="text-start ps-4">
                            <h5 class="mb-3">${job.jobTitle}</h5>
                            <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>${job.location}</span>
                            <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>${job.jobType}</span>
                            <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>${job.salary}</span>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                        <div class="d-flex mb-3">
                            <a class="btn btn-light btn-square me-3" href=""><i class="far fa-heart text-primary"></i></a>
                            <button class="btn btn-primary" onclick="applyJob(${job.jobID}, this,event)">Apply Now</button>
                        </div>
                        <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Date Line: ${formatDate(job.closingDate)}</small>
                    </div>
                </div>
            `;
            jobItem.addEventListener('click', () => {
                displayJobDetails(job);
            });
            Jobs.appendChild(jobItem);
        });
    } catch (err) {
        console.log(err.message);
    }
}
const displayJobDetails = (job) => {
    console.log(job);

    document.getElementById('jobModalLabel').innerText = job.jobTitle;
    document.getElementById('jobModalImage').src = job.imageUrl;
    document.getElementById('jobModalCompanyName').innerText = job.companyName;
    document.getElementById('jobModalJobTitle').innerText = job.jobTitle;
    document.getElementById('jobModalCategory').innerText = job.category;
    document.getElementById('jobModalDescription').innerText = job.jobDescription;
    document.getElementById('jobModalSalary').innerText = job.salary;
    document.getElementById('jobModalLocation').innerText = job.location;
    document.getElementById('jobModalType').innerText = job.jobType;
    document.getElementById('jobModalPostingDate').innerText = formatDate(job.postingDate);
    document.getElementById('jobModalClosingDate').innerText = formatDate(job.closingDate);

    // Display skills as a list
    const skillsList = document.getElementById('jobModalSkills');
    skillsList.innerHTML = ''; // Clear previous skills
    job.skills.forEach(skill => {
        const skillItem = document.createElement('li');
        skillItem.innerText = skill.skillName;
        skillsList.appendChild(skillItem);
    });

    const jobModal = new bootstrap.Modal(document.getElementById('jobModal'));
    jobModal.show();
}



function formatDate(datetimeStr) {
    const date = new Date(datetimeStr);

    const options = { day: 'numeric', month: 'short', year: 'numeric' };
    return date.toLocaleDateString('en-GB', options);
}

        // End of all Jobs


        // Load Full Time Jobs

        const fullTimeJob = async () => {
            try {
                const response = await fetch('http://localhost:5190/api/Application/GetJobsFilterByJobType?jobType=FullTime', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Status : ${errorData.statusCode}, message : ${errorData.message}`);
                }
                const fullTimeJobs = await response.json();
                
                await displayJobs(fullTimeJobs, 'tab-2');
            }
            catch (err) {
                console.log(err.message);
            }
        }
        // Ending of Full Time Jobs

        // Load Part Time Jobs
        const partTimeJob = async () => {
            try {
                const response = await fetch('http://localhost:5190/api/Application/GetJobsFilterByJobType?jobType=PartTime', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Status: ${errorData.statusCode}, message: ${errorData.message}`);
                }

                const partTimeJobs = await response.json();
            
                await displayJobs(partTimeJobs, 'tab-3');
            } catch (err) {
                console.log(err.message);
            }
        };

        // Ending of Part Time Jobs






       
// Apply Filters
const applyFilters = async () => {
    try {
        let salaryFilter = document.getElementById('salaryFilter').value;
        const locationFilter = document.getElementById('locationFilter').value.toLowerCase();
        const searchQuery = document.getElementById('searchInput').value.toLowerCase();

        let filteredJobs = AllJobs;

        if (salaryFilter) {
            salaryFilter = salaryFilter.split('-');
            const minSalary = parseInt(salaryFilter[0], 10);
            const maxSalary = salaryFilter[1] ? parseInt(salaryFilter[1], 10) : Number.MAX_SAFE_INTEGER;
            filteredJobs = filteredJobs.filter(job => job.salary >= minSalary && job.salary <= maxSalary);
        }

        if (locationFilter) {
            filteredJobs = filteredJobs.filter(job => job.location.toLowerCase().includes(locationFilter));
        }
        if (searchQuery) {
                filteredJobs = filteredJobs.filter(job =>
                    job.jobTitle.toLowerCase().includes(searchQuery) ||
                    job.companyName.toLowerCase().includes(searchQuery) ||
                    job.jobDescription.toLowerCase().includes(searchQuery)||
                    job.category.toLowerCase().includes(searchQuery)||
                    job.jobType.toLowerCase().includes(searchQuery)
                );
            }
        // Activate the tab-1 tab
        // Redirect to tab-1
        

        await displayJobs(filteredJobs, 'tab-1');
        
    } catch (err) {
        console.log(err.message);
    }
}
  const categoryJobs=async(jobCategory)=>{
    try{
        
        let categoryJobs=AllJobs.filter(job=>jobCategory.includes(job.category));
        console.log(categoryJobs);
        
        await displayJobs(categoryJobs,'tab-1');
    }
    catch(err){
        console.log(err.message);
  }
}
const applyJob=async(jobId,buttonElement,evnet)=>{
    try{
        event.stopPropagation();
        const jobSeekerId = localStorage.getItem('JobSeekerId');    
        if (!jobSeekerId) {
            
           if(localStorage.getItem('EmployerId'))
           document.getElementById('toastMessage').innerText = 'Please login as JobSeeker for applying job';
            else
            document.getElementById('toastMessage').innerText = 'Please login to apply for a job';
        
            var toastElement = document.getElementById('myToast');
            var toast = new bootstrap.Toast(toastElement);
            toast.show();
            await new Promise(resolve => setTimeout(resolve, 1000));
                
            
          
            
            return;
        }
        const response = await fetch(`http://localhost:5190/api/Application/ApplyForJob?jobSeekerID=${jobSeekerId}&jobID=${jobId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('token')} `,
            },
        });
        if (!response.ok) {
            const errorData = await response.json();
            document.getElementById('toastMessage').innerText = 'you have already applied for this job';
            var toastElement = document.getElementById('myToast');
            var toast = new bootstrap.Toast(toastElement);
            toast.show();
            await new Promise(resolve => setTimeout(resolve, 1000));
        }
        const data = response.json();
        console.log(data);
        buttonElement.innerHTML="Applied";

    }
    catch(err){
        console.log(err.message);
    }
}
const postJob=async()=>{
    try{
        const employerId = localStorage.getItem('EmployerId');
        if (!employerId) {
            
           
            document.getElementById('toastMessage').innerText = 'Please login as a Employer to post a job';
            var toastElement = document.getElementById('myToast');
            var toast = new bootstrap.Toast(toastElement);
            toast.show();
            await new Promise(resolve => setTimeout(resolve, 1000));
                
            
          
            
            return;
        }
        window.location.href='jobPosting.html';
    }
    catch(err){
        console.log(err.message);
    }
}
document.getElementById('logOut').addEventListener('click',()=>{
    localStorage.clear();
    window.location.href='login.html';
});



loadJob(); // Load All Jobs
document.getElementById('salaryFilter').addEventListener('change', applyFilters);
document.getElementById('locationFilter').addEventListener('input', applyFilters);
document.getElementById('searchInput').addEventListener('input', applyFilters);
document.getElementById('marketingJob').addEventListener('click',()=>categoryJobs('Marketing'));
document.getElementById('customerServiceJob').addEventListener('click',()=>categoryJobs('Customer Service'));
document.getElementById('humanResourceJob').addEventListener('click',()=>categoryJobs('Human Resource'));
document.getElementById('productManagementJob').addEventListener('click',()=>categoryJobs('Project Management'));
document.getElementById('networkingJob').addEventListener('click',()=>categoryJobs('Networking'));
document.getElementById('uiuxJob').addEventListener('click',()=>categoryJobs('Design'));
document.getElementById('dataScienceJob').addEventListener('click',()=>categoryJobs('Data Science'));
document.getElementById('softwareJob').addEventListener('click',()=>categoryJobs('Software Development'));





    </script>
</body>

</html>